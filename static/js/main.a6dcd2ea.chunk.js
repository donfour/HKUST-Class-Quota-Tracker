(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(49),i=a.n(r),s=(a(64),a(14)),l=a(15),c=a(18),u=a(16),h=a(19),m=a(41),p=a(40),f=a(50);function d(){var e=Object(f.a)(["\nquery GetCourseQuery($course_code: String!){\n\tcourse(course_code: $course_code){\n    course_code\n    data {\n      section_id\n      section_name\n      wait_values {\n        timestamp\n        value\n      }\n      enrol_values {\n        timestamp\n        value\n      }\n      avail_values {\n        timestamp\n        value\n      }\n      quota_values {\n        timestamp\n        value\n      }\n    }\n  }\n}\n"]);return d=function(){return e},e}var v=Object(m.b)(d()),w=a(7),b=(a(91),"#393B46"),_="#88d8b0",g="#29A4DE",E="#ff6f69",y=[{title:"Quota",color:b},{title:"Enrol",color:g},{title:"Avail",color:_},{title:"Wait",color:E}],k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={show_avail:!0,show_enrol:!0,show_quota:!0,show_wait:!0,lastDrawLocation:null},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"toggle_show",value:function(e){switch(e.title){case"Quota":this.setState(function(e){return{show_quota:!e.show_quota}});break;case"Enrol":this.setState(function(e){return{show_enrol:!e.show_enrol}});break;case"Avail":this.setState(function(e){return{show_avail:!e.show_avail}});break;case"Wait":this.setState(function(e){return{show_wait:!e.show_wait}})}}},{key:"render_line_series",value:function(){var e=[],t=this.state,a=t.show_avail,n=t.show_enrol,r=t.show_quota,i=t.show_wait,s=this.props.section,l=s.avail_values,c=s.enrol_values,u=s.quota_values,h=s.wait_values;s.section_name,s.section_id;return a&&e.push(o.a.createElement(w.e,{opacity:.7,color:_,data:l.map(function(e){return{x:parseInt(e.timestamp),y:parseInt(e.value)}})})),n&&e.push(o.a.createElement(w.e,{opacity:.7,color:g,data:c.map(function(e){return{x:parseInt(e.timestamp),y:parseInt(e.value)}})})),r&&e.push(o.a.createElement(w.e,{opacity:.7,color:b,data:u.map(function(e){return{x:parseInt(e.timestamp),y:parseInt(e.value)}})})),i&&e.push(o.a.createElement(w.e,{opacity:.7,color:E,data:h.map(function(e){return{x:parseInt(e.timestamp),y:parseInt(e.value)}})})),e}},{key:"render",value:function(){var e=this,t=this.props.section,a=t.section_name,n=t.section_id,r=this.state.lastDrawLocation;return o.a.createElement("div",{className:"graph_container"},o.a.createElement("div",null,"".concat(a," (").concat(n,")")),o.a.createElement("div",null,o.a.createElement(w.b,{orientation:"horizontal",items:y,onItemClick:this.toggle_show.bind(this)}),o.a.createElement(w.h,{yPadding:10,xType:"time",width:700,height:300,margin:{bottom:55},xDomain:r&&[r.left,r.right],yDomain:r&&[r.bottom,r.top]},o.a.createElement(w.d,null),o.a.createElement(w.f,null),this.render_line_series(),o.a.createElement(w.a,{style:{bottom:{fill:"#fff"},left:{fill:"#fff"},right:{fill:"#fff"},top:{fill:"#fff"}}}),o.a.createElement(w.g,{tickLabelAngle:-90}),o.a.createElement(w.i,null),o.a.createElement(w.c,{onBrushEnd:function(t){return e.setState({lastDrawLocation:t})},onDrag:function(t){e.setState(function(e){var a=e.lastDrawLocation;return{lastDrawLocation:{bottom:a.bottom+(t.top-t.bottom),left:a.left-(t.right-t.left),right:a.right-(t.right-t.left),top:a.top+(t.top-t.bottom)}}})}}))),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return e.setState({lastDrawLocation:null})},className:"reset_zoom_btn"},"Reset Zoom")))}}]),t}(o.a.Component),O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={input:"MATH1012"},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(p.b,{query:v,variables:{course_code:this.state.input},pollInterval:6e5},function(t){var a=t.loading,n=t.error,r=t.data;return o.a.createElement("div",{className:"app"},o.a.createElement("h1",{className:"title"},"HKUST Class Quota Tracker (Winter 2018)"),o.a.createElement("p",{className:"instruction"},"Type in a course code to search. Drag on the charts to zoom in. Click on legend to hide / show lines. ",o.a.createElement("br",null),"It might take 5-10 seconds to load at first, as the server goes to sleep after being idle for a while."),o.a.createElement("input",{className:"searchbar",onChange:function(t){return e.setState({input:t.target.value})},placeholder:"Search for a course"}),n?"Error! ".concat(n.message):a?"Loading...":o.a.createElement("div",null,o.a.createElement("div",{className:"course_code"},r.course.course_code),0!==r.course.data.length?r.course.data.map(function(e,t){return o.a.createElement(k,{key:t,section:e})}):"Course not found!"),o.a.createElement("p",{className:"description"},"This app srapes the ",o.a.createElement("a",{target:"_blank",href:"https://w5.ab.ust.hk/wcq/cgi-bin/",rel:"noopener noreferrer"},"HKUST Class Quota")," page every 10 minutes and keeps track of the availability of all courses. Is it useful? Debatable. But isn't it fun to see people get rekt by the SOSC1980 waitlist?"))})}}]),t}(n.Component),j=(a(97),new m.a({uri:"https://fierce-ocean-63227.herokuapp.com/graphql"})),S=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(p.a,{client:j},o.a.createElement(O,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},59:function(e,t,a){e.exports=a(100)},64:function(e,t,a){},97:function(e,t,a){}},[[59,2,1]]]);
//# sourceMappingURL=main.a6dcd2ea.chunk.js.map